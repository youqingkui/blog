// Generated by CoffeeScript 1.10.0
(function() {
  var Evernote, cheerio, client, developerToken, htmlToText, marked, noteStore;

  Evernote = require('evernote').Evernote;

  developerToken = process.env.DeveloperToken;

  htmlToText = require('html-to-text');

  cheerio = require('cheerio');

  marked = require('marked');

  client = new Evernote.Client({
    token: developerToken
  });

  noteStore = client.getNoteStore('https://app.yinxiang.com/shard/s5/notestore');

  exports.listNotebooks = function(req, res, next) {
    return noteStore.listNotebooks(function(err, notebooks) {
      var book, j, len;
      if (err) {
        console.log(err);
      }
      if (err) {
        return next(err);
      }
      for (j = 0, len = notebooks.length; j < len; j++) {
        book = notebooks[j];
        console.log(book.guid, book.name);
      }
      return res.send("ok");
    });
  };

  exports.getNoteContent = function(req, res, next) {
    return noteStore.getNoteContent('237aa896-07a4-41df-a833-a340011ef300', function(err, content) {
      var $, text;
      if (err) {
        return next(err);
      }
      console.log(content);
      console.log("");
      $ = cheerio.load(content);
      text = '';
      $("div").each(function(i, item) {
        return text += $(item).text() + "\n";
      });
      console.log("txt ==>");
      console.log(text);
      console.log("txt ==>");
      marked.setOptions({
        highlight: function(code) {
          return require('highlight').highlightAuto(code).value;
        }
      });
      console.log(marked(text));
      return res.send("ko");
    });
  };

  exports.getNote = function(req, res, next) {};

}).call(this);

//# sourceMappingURL=sync.server.controller.js.map
